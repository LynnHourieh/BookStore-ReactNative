{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { createContext, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var Store = createContext();\nexport var StoreProvider = function StoreProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    addedproduct = _useState2[0],\n    setProduct = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    productLoading = _useState4[0],\n    setProductLoading = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    items = _useState6[0],\n    setItems = _useState6[1];\n  function addItemToCart(id) {\n    var addProductToCart = function () {\n      var _ref2 = _asyncToGenerator(function* (productId) {\n        try {\n          var response = yield axios.get(`http://10.0.0.22:5000/api/products/${productId}`);\n          return response.data;\n        } catch (error) {\n          console.error(\"Error fetching data:\", error);\n          return null;\n        }\n      });\n      return function addProductToCart(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    function addProduct() {\n      return _addProduct.apply(this, arguments);\n    }\n    function _addProduct() {\n      _addProduct = _asyncToGenerator(function* () {\n        var product = yield addProductToCart(id);\n        if (!product) {\n          return;\n        }\n        setItems(function (prevItems) {\n          var existingItem = prevItems.find(function (item) {\n            return item.id === id;\n          });\n          if (!existingItem) {\n            return [].concat(_toConsumableArray(prevItems), [{\n              id: id,\n              qty: 1,\n              product: product,\n              totalPrice: product.price\n            }]);\n          } else {\n            return prevItems.map(function (item) {\n              if (item.id === id) {\n                item.qty++;\n                item.totalPrice += product.price;\n              }\n              return item;\n            });\n          }\n        });\n      });\n      return _addProduct.apply(this, arguments);\n    }\n    addProduct();\n  }\n  function getItemsCount() {\n    return items.reduce(function (sum, item) {\n      return sum + item.qty;\n    }, 0);\n  }\n  function getTotalPrice() {\n    return items.reduce(function (sum, item) {\n      return sum + item.totalPrice;\n    }, 0);\n  }\n  var value = {\n    items: items,\n    addItemToCart: addItemToCart,\n    getItemsCount: getItemsCount,\n    getTotalPrice: getTotalPrice\n  };\n  return _jsx(Store.Provider, {\n    value: value,\n    children: children\n  });\n};","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jsx","_jsx","Store","StoreProvider","_ref","children","_useState","_useState2","_slicedToArray","addedproduct","setProduct","_useState3","_useState4","productLoading","setProductLoading","_useState5","_useState6","items","setItems","addItemToCart","id","addProductToCart","_ref2","_asyncToGenerator","productId","response","get","data","error","console","_x","apply","arguments","addProduct","_addProduct","product","prevItems","existingItem","find","item","concat","_toConsumableArray","qty","totalPrice","price","map","getItemsCount","reduce","sum","getTotalPrice","value","Provider"],"sources":["D:/ReactNativeProject/Store.js"],"sourcesContent":["// ApiContext.js\r\nimport React, { createContext, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nexport const Store = createContext();\r\n\r\nexport const StoreProvider = ({ children }) => {\r\n  const [addedproduct, setProduct] = useState(\"\");\r\n  const [productLoading, setProductLoading] = useState(true);\r\n  const [items, setItems] = useState([]);\r\n\r\n\r\n  function addItemToCart(id) {\r\n    const addProductToCart = async (productId) => {\r\n      try {\r\n        const response = await axios.get(\r\n          `http://10.0.0.22:5000/api/products/${productId}`\r\n        );\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n        return null;\r\n      }\r\n    };\r\n\r\n    // Use async function to add product to cart\r\n    async function addProduct() {\r\n      const product = await addProductToCart(id);\r\n      //console.log(\"product\",product)\r\n      if (!product) {\r\n        // Handle the case when product fetch fails\r\n        return;\r\n      }\r\n\r\n      setItems((prevItems) => {\r\n        const existingItem = prevItems.find((item) => item.id === id);\r\n        if (!existingItem) {\r\n          return [\r\n            ...prevItems,\r\n            {\r\n              id,\r\n              qty: 1,\r\n              product,\r\n              totalPrice: product.price,\r\n            },\r\n          ];\r\n        } else {\r\n          return prevItems.map((item) => {\r\n            if (item.id === id) {\r\n              item.qty++;\r\n              item.totalPrice += product.price;\r\n            }\r\n            return item;\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    // Call the async function to add product\r\n    addProduct();\r\n  }\r\n\r\n  function getItemsCount() {\r\n    return items.reduce((sum, item) => sum + item.qty, 0);\r\n  }\r\n\r\n  function getTotalPrice() {\r\n    return items.reduce((sum, item) => sum + item.totalPrice, 0);\r\n  }\r\n  const value = {\r\n    items,\r\n    addItemToCart,\r\n    getItemsCount,\r\n    getTotalPrice,\r\n\r\n  };\r\n  return <Store.Provider value={value}>{children}</Store.Provider>;\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}